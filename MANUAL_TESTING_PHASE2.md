# Phase 2 手動測試清單

**測試時間**: 預估 ~20 分鐘
**測試環境**: Chrome 瀏覽器 + LinkTrove 擴充功能

---

## 🔴 優先級 1：核心功能驗證（必須測試）

### 1. 拖曳功能完整性 (5 分鐘)

#### 1.1 基本拖曳
- [ ] **同 Group 拖曳**: 在同一 Group 內拖曳卡片到不同位置
  - 預期：順序正確更新並保存
  - 重新整理頁面後順序保持

- [ ] **跨 Group 拖曳**: 從 Group A 拖曳卡片到 Group B
  - 預期：卡片成功移動到目標 Group
  - 卡片在新 Group 的位置正確

- [ ] **Tab 拖曳**: 從 Open Tabs 拖曳分頁到 Group
  - 預期：分頁保存為卡片
  - favicon、title、url 正確保存

- [ ] **拖曳取消**: 拖曳過程中移到空白處或按 ESC
  - 預期：ghost 立即消失
  - 無閃爍或殘留

**檢查點**:
- [ ] Console 無錯誤訊息
- [ ] ghost 位置跟隨游標流暢
- [ ] 最終 drop 位置正確

---

#### 1.2 大量卡片拖曳 (RAF 節流測試)

**準備**: 建立一個包含 **400+ 張卡片**的 Group

<details>
<summary>如何快速建立測試數據？</summary>

方法 1: 手動添加（較慢）
- 從 Open Tabs 快速拖曳多個分頁

方法 2: 使用 Import 功能（較快）
- 準備一個包含 400+ 個書籤的 HTML 文件
- 使用「Import from HTML」功能

方法 3: 開發環境 Console（最快）
```javascript
// 在 Console 執行（需要開發環境）
for (let i = 0; i < 400; i++) {
  // 手動快速添加卡片，或使用 API
}
```
</details>

測試步驟：
- [ ] **拖曳 400+ 卡片的 Group**:
  - 預期：拖曳流暢，無明顯卡頓
  - ghost 可能略微延遲（符合 RAF 節流預期）
  - 最終 drop 位置完全正確

- [ ] **對比 <300 張卡片的 Group**:
  - 預期：拖曳即時反應，ghost 緊隨游標

**效能觀察** (可選):
- [ ] 開啟 Chrome DevTools → Performance
- [ ] 錄製拖曳過程
- [ ] 查看 FPS（應該 >50 FPS）

---

### 2. 批次操作功能 (3 分鐘)

#### 2.1 批次選取
- [ ] **Hover 顯示 checkbox**: 滑鼠移到卡片圖示上
  - 預期：checkbox 淡入顯示

- [ ] **選取多張卡片**: 點擊 3-5 張卡片的 checkbox
  - 預期：選取的卡片 checkbox 保持顯示
  - 底部浮動工具欄出現
  - 工具欄顯示正確的選取數量

- [ ] **取消選取**: 再次點擊已選取的 checkbox
  - 預期：checkbox 取消選取
  - 工具欄數量更新

- [ ] **清除所有選取**: 點擊工具欄的 ✕ 按鈕
  - 預期：所有 checkbox 取消選取
  - 工具欄消失

---

#### 2.2 批次移動
- [ ] **選取 5-10 張卡片** → 點擊「MOVE」按鈕
  - 預期：移動對話框出現

- [ ] **選擇目標 Organization 和 Category**
  - 預期：Group 選項正確更新

- [ ] **執行移動**
  - 預期：所有選取的卡片移動到目標 Group
  - 卡片順序保持（按原 items 順序）
  - Toast 提示「已移動 N 張卡片」
  - 選取自動清除

**檢查點**:
- [ ] 移動後原 Group 卡片數量正確
- [ ] 移動後目標 Group 卡片數量正確
- [ ] 卡片順序保持（不是隨機順序）

---

#### 2.3 批次開啟
- [ ] **選取 3 張卡片** → 點擊「Open tabs」
  - 預期：3 個新分頁開啟
  - 選取自動清除

- [ ] **選取 11+ 張卡片** → 點擊「Open tabs」
  - 預期：確認對話框出現
  - 對話框顯示正確的數量
  - 點擊確認後所有分頁開啟

---

#### 2.4 批次刪除
- [ ] **選取多張卡片** → 點擊「DELETE」
  - 預期：確認對話框出現
  - 點擊確認後卡片刪除
  - Toast 提示刪除成功

---

### 3. Group 展開/收合 (2 分鐘)

#### 3.1 基本展開/收合
- [ ] **展開 Group**: 點擊箭頭 ▼
  - 預期：CardGrid 正確渲染
  - 所有卡片顯示

- [ ] **收合 Group**: 點擊箭頭（旋轉 -90deg）
  - 預期：CardGrid 消失
  - 顯示「N 張卡片（已收合）」提示
  - 提示文字數量正確

- [ ] **重新整理頁面**
  - 預期：收合狀態保持

---

#### 3.2 批次收合
- [ ] **使用「Collapse All」功能**
  - 預期：所有 Groups 收合
  - 所有 Groups 顯示卡片數量提示

- [ ] **使用「Expand All」功能**
  - 預期：所有 Groups 展開
  - 所有 CardGrid 正常渲染

---

## 🟡 優先級 2：效能驗證（選擇性測試）

### 4. GroupsView 渲染速度 (3 分鐘)

**測試場景**: 500 張卡片分布在 10 個 Groups

**準備**:
- 建立 10 個 Groups
- 每個 Group 添加 50 張卡片（總計 500 張）

**測試步驟**:
- [ ] **開啟 Chrome DevTools** → Performance
- [ ] **點擊錄製按鈕** 🔴
- [ ] **切換到該 Category**（觸發 GroupsView 渲染）
- [ ] **停止錄製**
- [ ] **查看 Performance 報告**:
  - 找到 `GroupsView` 相關的 render
  - 確認渲染時間 <200ms

**對比測試** (可選):
- 如果有時間，可以使用 git 切換到優化前的版本
- 重複上述步驟
- 對比渲染時間差異

---

### 5. 批次操作效能 (2 分鐘)

- [ ] **選取 50 張卡片**
  - 觀察：checkbox 更新是否即時
  - 觀察：工具欄數量更新是否即時

- [ ] **取消選取部分卡片**
  - 觀察：UI 更新是否流暢

**預期結果**: 無明顯延遲，選取操作流暢

---

## 🟢 優先級 3：邊緣情況驗證（選擇性測試）

### 6. RAF Cleanup 驗證 (2 分鐘)

#### 6.1 快速拖曳後 drop
- [ ] **快速拖曳卡片並立即 drop**
  - 預期：ghost 立即消失（無閃爍）

#### 6.2 拖曳後移開
- [ ] **拖曳卡片後移出容器範圍**
  - 預期：ghost 正確清理

#### 6.3 跨 Group 快速拖曳
- [ ] **在多個 Groups 間快速拖曳**
  - 預期：無殘留 ghost
  - 每次只有一個 Group 高亮

#### 6.4 拖曳中重新整理（極端情況）
- [ ] **拖曳過程中按 F5 重新整理頁面**
  - 預期：頁面正常重新載入（無 crash）

---

### 7. dataTransfer 錯誤處理 (1 分鐘)

#### 7.1 外部拖曳
- [ ] **從桌面拖曳檔案到 Group**
  - 預期：無錯誤訊息
  - 不處理外部檔案（符合預期）

#### 7.2 瀏覽器相容性（可選）
- [ ] **在 Firefox 測試拖曳**（如果適用）
  - 預期：功能正常

- [ ] **在 Edge 測試拖曳**（如果適用）
  - 預期：功能正常

---

## 📊 測試報告模板

完成測試後，請複製以下模板回報結果：

```markdown
## Phase 2 手動測試報告

**測試日期**: YYYY-MM-DD
**測試人員**: [Your Name]
**Chrome 版本**: [e.g., 120.0.6099.109]

### ✅ 通過的測試
- [x] 基本拖曳功能
- [x] 跨 Group 拖曳
- [x] 批次選取
- [x] 批次移動
- [x] Group 展開/收合

### ❌ 失敗的測試
- [ ] 測試項目 X
  - **錯誤描述**: [詳細描述]
  - **Console 錯誤**: [複製錯誤訊息]
  - **重現步驟**:
    1. ...
    2. ...

### 📊 效能觀察
- **GroupsView 渲染時間**: ___ms (目標 <200ms)
- **400 卡拖曳幀率**: ___FPS (目標 >50 FPS)
- **批次選取 50 卡反應**: [即時/略有延遲/明顯延遲]

### 💡 其他發現
- [任何其他觀察或建議]
```

---

## 🚀 快速測試指令

```bash
# 1. 編譯最新版本
npm run build

# 2. 載入擴充功能
# Chrome → 擴充功能 → 開發人員模式 → 載入未封裝項目
# 選擇 dist/ 目錄

# 3. 開啟 Chrome DevTools (F12)
# - Console: 查看錯誤
# - Performance: 測量渲染時間

# 4. 執行上述測試場景
```

---

## 📝 注意事項

1. **測試前先備份數據**
   - 建議在測試環境進行，避免影響真實數據

2. **清除快取**（如果遇到異常）
   ```
   Chrome DevTools → Application → Storage → Clear site data
   ```

3. **查看 Console**
   - 所有測試過程中保持 Console 開啟
   - 任何錯誤訊息都需要記錄

4. **效能測試變數**
   - 電腦硬體會影響效能數據
   - 建議在相同環境下對比測試

---

**預估總測試時間**:
- 優先級 1（核心功能）: ~10 分鐘
- 優先級 2（效能驗證）: ~5 分鐘
- 優先級 3（邊緣情況）: ~3 分鐘
- **總計**: ~20 分鐘
