# 手動測試清單 - 右側面板拖曳清理修復

## 測試環境設置

### 1. 載入擴充功能
- [ ] `npm run build` 編譯成功
- [ ] 開啟 Chrome/Edge `chrome://extensions`
- [ ] 啟用「開發人員模式」
- [ ] 點擊「載入未封裝項目」
- [ ] 選擇 `dist/` 目錄
- [ ] 確認擴充功能已啟用

### 2. 準備測試環境
- [ ] 開啟 LinkTrove 新分頁
- [ ] 確認右側 Open Tabs 區域顯示分頁
- [ ] 開啟至少 2 個瀏覽器視窗（各有 3+ 個分頁）
- [ ] 建立至少 1 個 Tab Group（在 Chrome 中右鍵分頁 → 新增至群組）

---

## A. 核心修復驗證（最重要）

### ✅ A1. 拖曳取消 - ESC 鍵
**目標**: 驗證按 ESC 取消拖曳後無殘留 DropIndicator

**步驟**:
1. [ ] 在右側面板拖曳任一 Tab
2. [ ] 移動滑鼠經過其他 Tab（觀察到半透明插入線出現）
3. [ ] **按 ESC 鍵**
4. [ ] **檢查**: 插入線立即消失，無殘留空白卡片

**預期結果**: ✅ 無殘留視覺元素

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

### ✅ A2. 拖曳取消 - 拖到右側外
**目標**: 驗證拖曳到非有效區域後無殘留

**步驟**:
1. [ ] 在右側面板拖曳任一 Tab
2. [ ] 移動滑鼠經過其他 Tab（觀察到插入線）
3. [ ] **將滑鼠拖到右側面板之外**（例如中間卡片區或左側邊欄）
4. [ ] 放開滑鼠（拖曳取消）
5. [ ] 回到右側面板檢查

**預期結果**: ✅ 右側無殘留插入線或空白卡片

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

### ✅ A3. 拖曳 Group 取消
**目標**: 驗證 Group 拖曳取消後無殘留

**步驟**:
1. [ ] 拖曳一個 Tab Group（拖曳 Group 標題）
2. [ ] 移動經過另一個 Group（觀察到插入線）
3. [ ] **按 ESC 或拖到外面取消**
4. [ ] **檢查**: 無殘留插入線

**預期結果**: ✅ 無殘留

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

## B. 回歸測試 - 正常拖曳功能

### ✅ B1. Tab → Tab 排序
**目標**: 驗證 Tab 排序拖曳仍正常運作

**步驟**:
1. [ ] 記錄右側 Loose Tabs 的順序（例如：Tab A, Tab B, Tab C）
2. [ ] 拖曳 Tab C 到 Tab A 和 Tab B 之間
3. [ ] 放開滑鼠

**預期結果**:
- ✅ 順序變為 Tab A, Tab C, Tab B
- ✅ 拖曳過程中插入線正確顯示
- ✅ 放開後插入線消失

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

### ✅ B2. Tab → Group 加入
**目標**: 驗證將 Tab 拖入 Group 仍正常

**步驟**:
1. [ ] 拖曳一個 Loose Tab
2. [ ] 拖曳到某個 Group 的區域內（不是 Group 之間，而是 Group 內部）
3. [ ] 放開滑鼠

**預期結果**:
- ✅ Tab 加入該 Group
- ✅ Tab 出現在 Group 的分頁列表中

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

### ✅ B3. Group → Group 排序
**目標**: 驗證 Group 排序拖曳仍正常

**步驟**:
1. [ ] 確認有至少 2 個 Tab Groups
2. [ ] 拖曳 Group A 的標題
3. [ ] 拖曳到 Group B 上方或下方
4. [ ] 放開滑鼠

**預期結果**:
- ✅ Group 順序改變
- ✅ 插入線正確顯示位置

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

### ✅ B4. 拖到 Window 背景尾端
**目標**: 驗證拖曳到 Window 空白處移到尾端

**步驟**:
1. [ ] 拖曳任一 Tab（Group 內或 Loose Tab）
2. [ ] 拖曳到該 Window 的空白背景區域（Loose Tabs 下方）
3. [ ] 放開滑鼠

**預期結果**:
- ✅ Tab 移動到該 Window 的最後位置
- ✅ 如果原本在 Group 內，會脫離 Group

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

## C. 跨區域測試（關鍵！）

### ✅ C1. 右側 Tab → 中間 CardGrid
**目標**: 驗證跨區拖曳不會相互干擾（關鍵測試）

**步驟**:
1. [ ] 在中間區域建立一個 Group（如果沒有）
2. [ ] 從右側拖曳一個 Tab
3. [ ] **拖曳到中間 CardGrid 區域**
4. [ ] 在中間卡片區放開（嘗試儲存為卡片）
5. [ ] **檢查右側**: 無殘留插入線或空白卡片

**預期結果**:
- ✅ 右側面板乾淨，無視覺殘留
- ✅ 中間區域功能正常（彈出儲存對話框或創建卡片）

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

### ✅ C2. 中間卡片拖曳不影響右側
**目標**: 驗證中間拖曳不會影響右側狀態

**步驟**:
1. [ ] 在中間 CardGrid 拖曳一張卡片
2. [ ] 拖曳到同 Group 內其他位置
3. [ ] 放開滑鼠
4. [ ] **檢查右側**: 面板狀態正常，無異常

**預期結果**:
- ✅ 中間卡片順序正確改變
- ✅ 右側面板完全不受影響

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

## D. 邊界測試

### ✅ D1. 快速連續拖曳
**目標**: 驗證連續取消拖曳不會累積殘留

**步驟**:
1. [ ] **第 1 次**: 拖曳 Tab A 經過 Tab B → 按 ESC 取消
2. [ ] **第 2 次**: 拖曳 Tab C 經過 Tab D → 拖到外面取消
3. [ ] **第 3 次**: 拖曳 Tab E 經過 Tab F → 按 ESC 取消
4. [ ] **檢查**: 右側面板狀態乾淨

**預期結果**:
- ✅ 無累積的空白卡片
- ✅ 無多個插入線殘留

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

### ✅ D2. 跨 Window 拖曳
**目標**: 驗證跨視窗拖曳後清理正常

**步驟**:
1. [ ] 確認有至少 2 個瀏覽器視窗（Window 1, Window 2）
2. [ ] 拖曳 Window 1 的 Tab A
3. [ ] 拖曳到 Window 2 的某個位置
4. [ ] 放開滑鼠（或取消）
5. [ ] **檢查兩個 Window 區域**: 無殘留

**預期結果**:
- ✅ Tab 正確移動（或取消後保持原位）
- ✅ 兩個 Window 區域都無殘留視覺元素

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

## E. 特殊場景測試

### ✅ E1. 拖曳過程中切換視窗
**目標**: 驗證異常中斷拖曳的清理

**步驟**:
1. [ ] 開始拖曳一個 Tab
2. [ ] **拖曳過程中按 Alt+Tab 切換到其他應用程式**
3. [ ] 切換回 Chrome
4. [ ] **檢查**: 右側無殘留

**預期結果**:
- ✅ 拖曳被中斷，無殘留

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
□ 不適用（無法測試）
```

---

### ✅ E2. 拖曳 Group 內最後一個 Tab
**目標**: 驗證特殊狀態下的清理

**步驟**:
1. [ ] 找到一個只有 1 個 Tab 的 Group
2. [ ] 拖曳該 Tab
3. [ ] 取消拖曳（ESC 或拖到外面）
4. [ ] **檢查**: 無殘留

**預期結果**:
- ✅ 無殘留插入線

**實際結果**:
```
□ 通過
□ 失敗（描述問題）:
```

---

## 測試結果總結

### 統計
- 總測試項目: **14**
- 通過: _____ / 14
- 失敗: _____ / 14
- 不適用: _____ / 14

### 核心修復狀態
- [ ] ✅ A1-A3 全部通過（修復成功）
- [ ] ❌ 有失敗項目（需要修復）

### 回歸測試狀態
- [ ] ✅ B1-B4 全部通過（無破壞既有功能）
- [ ] ❌ 有失敗項目（引入回歸問題）

### 跨區域測試狀態
- [ ] ✅ C1-C2 全部通過（不影響其他區域）
- [ ] ❌ 有失敗項目（跨區域干擾）

### 整體評估
```
□ 全部通過 - 可以部署
□ 部分失敗 - 需要修復以下問題:


□ 大部分失敗 - 需要重新評估方案
```

---

## 開發者工具檢查

### Console 檢查
在測試過程中開啟 F12 開發者工具，檢查 Console：

- [ ] 無紅色錯誤訊息
- [ ] 無黃色警告訊息（除了既有的）
- [ ] 拖曳取消時無異常 log

**發現的異常訊息**:
```
（如有，請貼上）
```

---

## 附加觀察

### 效能觀察
- [ ] 拖曳過程流暢（無卡頓）
- [ ] 插入線顯示即時（延遲 <50ms）
- [ ] 放開後清理即時（無可見延遲）

### 視覺反饋
- [ ] 插入線顏色/樣式正確
- [ ] 拖曳中 Tab 半透明效果正常
- [ ] 無閃爍或抖動現象

---

## 測試完成後

請將測試結果回報：
1. 勾選所有測試項目的狀態（□ 通過 / □ 失敗）
2. 記錄任何失敗項目的詳細描述
3. 截圖任何異常現象（如有）
4. 將結果反饋給開發團隊

---

**測試人員**: _______________
**測試日期**: _______________
**Build 版本**: `fix-tabs-panel-drop-indicator-cleanup`
